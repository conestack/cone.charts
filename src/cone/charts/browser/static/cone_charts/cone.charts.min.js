var cone_charts=function(t,a){"use strict";class s extends ts.Events{static initialize(t){a("div.cone-chart",t).each((function(){let t=a(this),s=t.data("chart-settings"),e=s.factory,i=new(ts.object_by_path(e))(t,s);ts.ajax.attach(i,t)}))}constructor(t,s){super(),this.elem=t,this.canvas=a("canvas",t),this.id=t.attr("id"),this.type=s.type,this.options=s.options,this.data_source=s.data_source,this.params=s.params,this.data=null,this.chart=null,this.on_before_load=this.on_before_load.bind(this),this.on_data_loaded=this.on_data_loaded.bind(this),this.load()}load(){this.unload(),this.trigger("on_before_load"),ts.ajax.request({url:this.data_source,type:"json",method:"GET",cache:!1,params:this.params,success:t=>{this.data=t,this.trigger("on_data_loaded")}})}unload(){null!==this.chart&&(this.chart.destroy(),this.chart=null)}destroy(){this.unload()}on_before_load(){}on_data_loaded(){this.create_chart()}create_chart(){this.chart=new Chart(this.canvas,{type:this.type,data:this.data,options:this.options})}}return a((function(){ts.ajax.register(s.initialize,!0)})),t.ChartTile=s,Object.defineProperty(t,"__esModule",{value:!0}),t}({},jQuery);
