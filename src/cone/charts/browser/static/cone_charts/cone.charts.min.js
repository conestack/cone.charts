var cone_charts=function(t,a){"use strict";class s extends ts.Events{static initialize(t){a("div.cone-chart",t).each((function(){let t=a(this),s=t.data("chart-settings"),i=s.factory,e=new(ts.object_by_path(i))(t,s);ts.ajax.attach(e,t)}))}constructor(t,s){super(),this.elem=t,this.canvas=a("canvas",t),this.id=t.attr("id"),this.type=s.type,this.options=s.options,this.data_source=s.data_source,this.params=s.params,this.data=null,this.chart=null,this.on_data_load=this.on_data_load.bind(this),this.prepare_options(),this.prepare_params(),this.load()}load(){this.unload(),ts.ajax.request({url:this.data_source,type:"json",method:"GET",cache:!1,params:this.params,success:t=>{this.data=t,this.prepare_data(),this.trigger("on_data_load")}})}unload(){null!==this.chart&&this.chart.destroy()}destroy(){this.unload()}on_data_load(){this.create_chart()}prepare_options(){}prepare_params(){}prepare_data(){}create_chart(){this.chart=new Chart(this.canvas,{type:this.type,data:this.data,options:this.options})}}return a((function(){void 0!==window.ts?ts.ajax.register(s.initialize,!0):bdajax.register(s.initialize,!0)})),t.ChartTile=s,Object.defineProperty(t,"__esModule",{value:!0}),t}({},jQuery);
