var cone_charts=function(t,a){"use strict";class s extends ts.Events{static initialize(t){a("div.cone-chart",t).each((function(){let t=a(this),s=t.data("chart-settings"),e=s.factory,r=new(ts.object_by_path(e))(t,s);ts.ajax.attach(r,t)}))}constructor(t,s){super(),this.elem=t,this.canvas=a("canvas",t),this.id=t.attr("id"),this.options=s.options,this.data_source=s.data_source,this.params=s.params,this.data=null,this.chart=null,this.on_data_load=this.on_data_load.bind(this),this.prepare_options(),this.prepare_params(),this.load()}load(){this.unload(),ts.ajax.request({url:this.data_source,type:"json",method:"GET",cache:!1,params:this.params,success:t=>{this.data=t,this.prepare_data(),this.trigger("on_data_load")}})}unload(){null!==this.chart&&this.chart.destroy()}destroy(){this.unload()}on_data_load(){this.create_chart()}prepare_options(){}prepare_params(){}prepare_data(){}create_chart(){throw new Error("create_chart must be overridden")}}return a((function(){void 0!==window.ts?ts.ajax.register(s.initialize,!0):bdajax.register(s.initialize,!0)})),t.BarChartTile=class extends s{constructor(t,a){super(t,a)}create_chart(){this.chart=new Chart(this.canvas,{type:"bar",data:this.data,options:this.options})}},t.ChartTile=s,t.LineChartTile=class extends s{constructor(t,a){super(t,a)}create_chart(){this.chart=new Chart(this.canvas,{type:"line",data:this.data,options:this.options})}},t.PieChartTile=class extends s{constructor(t,a){super(t,a)}create_chart(){this.chart=new Chart(this.canvas,{type:"pie",data:this.data,options:this.options})}},t.PolarChartTile=class extends s{constructor(t,a){super(t,a)}create_chart(){this.chart=new Chart(this.canvas,{type:"polarArea",data:this.data,options:this.options})}},Object.defineProperty(t,"__esModule",{value:!0}),window.cone_charts=t,t}({},jQuery);
